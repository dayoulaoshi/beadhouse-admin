{"remainingRequest":"/Users/hchen/Desktop/vue-element-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hchen/Desktop/vue-element-admin/src/views/forgetpassword/forget_newpassword.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hchen/Desktop/vue-element-admin/src/views/forgetpassword/forget_newpassword.vue","mtime":1594128874284},{"path":"/Users/hchen/Desktop/vue-element-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hchen/Desktop/vue-element-admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hchen/Desktop/vue-element-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hchen/Desktop/vue-element-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHZhbGlkVXNlcm5hbWUgfSBmcm9tICdAL3V0aWxzL3ZhbGlkYXRlJwppbXBvcnQgU29jaWFsU2lnbiBmcm9tICcuL2NvbXBvbmVudHMvU29jaWFsU2lnbmluJwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdmb3JnZXQnLAogIGNvbXBvbmVudHM6IHsgU29jaWFsU2lnbiB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsb2dpbkZvcm06IHsKICAgICAgICB1c2VybmFtZTogJycsCiAgICAgICAgcGFzc3dvcmROZXc6ICcnLAogICAgICAgIHRva2VuOicnCiAgICAgIH0sCiAgICAgIGZvcm06ewogICAgICAgIGFuc3dlcjonJwogICAgICB9LAogICAgICBwYXNzd29yZFR5cGU6ICdwYXNzd29yZCcsCiAgICAgIGNhcHNUb29sdGlwOiBmYWxzZSwKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIHNob3dEaWFsb2c6IGZhbHNlLAogICAgICByZWRpcmVjdDogdW5kZWZpbmVkLAogICAgICBvdGhlclF1ZXJ5OiB7fQogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgICRyb3V0ZTogewogICAgICBoYW5kbGVyOiBmdW5jdGlvbihyb3V0ZSkgewogICAgICAgIGNvbnN0IHF1ZXJ5ID0gcm91dGUucXVlcnkKICAgICAgICBpZiAocXVlcnkpIHsKICAgICAgICAgIHRoaXMucmVkaXJlY3QgPSBxdWVyeS5yZWRpcmVjdAogICAgICAgICAgdGhpcy5vdGhlclF1ZXJ5ID0gdGhpcy5nZXRPdGhlclF1ZXJ5KHF1ZXJ5KQogICAgICAgIH0KICAgICAgfSwKICAgICAgaW1tZWRpYXRlOiB0cnVlCiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgLy8gd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3N0b3JhZ2UnLCB0aGlzLmFmdGVyUVJTY2FuKQogIH0sCiAgbW91bnRlZCgpIHsKCiAgICB0aGlzLmxvZ2luRm9ybS51c2VybmFtZSA9IHRoaXMuJHJvdXRlLnF1ZXJ5LnVzZXJuYW1lCiAgICB0aGlzLmxvZ2luRm9ybS50b2tlbiA9IHRoaXMuJHJvdXRlLnF1ZXJ5LnRva2VuCiAgICBhbGVydCh0aGlzLmxvZ2luRm9ybS51c2VybmFtZSApCiAgICBhbGVydCh0aGlzLmxvZ2luRm9ybS50b2tlbiApCgogIH0sCiAgZGVzdHJveWVkKCkgewogICAgLy8gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3N0b3JhZ2UnLCB0aGlzLmFmdGVyUVJTY2FuKQogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlc3VibWl0KCkKICAgIHsKICAgICAgbGV0IHBhcmFtID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpCgogICAgICBwYXJhbS5hcHBlbmQoInVzZXJuYW1lIiwgdGhpcy5sb2dpbkZvcm0udXNlcm5hbWUpCiAgICAgIHBhcmFtLmFwcGVuZCgiZm9yZ2V0VG9rZW4iLCB0aGlzLmxvZ2luRm9ybS50b2tlbikKICAgICAgcGFyYW0uYXBwZW5kKCJwYXNzd29yZE5ldyIsIHRoaXMubG9naW5Gb3JtLnBhc3N3b3JkKQoKICAgICAgICB0aGlzLiRheGlvcy5wb3N0KCdodHRwOi8vMjc1dzVwNjk2NC53aWNwLnZpcC91c2VyL2ZvcmdldF9yZXNldF9wYXNzd29yZC5kbycscGFyYW0pCiAgICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgcGF0aDonL2xvZ2luJyx9KQogICAgICAgICAgfSkKICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7CiAgICAgICAgICAgIGFsZXJ0KCLojrflj5bmlbDmja7lpLHotKUiKQogICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpCiAgICAgICAgICB9KQoKICAgIH0sCiAgICBjaGVja0NhcHNsb2NrKGUpIHsKICAgICAgY29uc3QgeyBrZXkgfSA9IGUKICAgICAgdGhpcy5jYXBzVG9vbHRpcCA9IGtleSAmJiBrZXkubGVuZ3RoID09PSAxICYmIChrZXkgPj0gJ0EnICYmIGtleSA8PSAnWicpCiAgICB9LAogICAgc2hvd1B3ZCgpIHsKICAgICAgaWYgKHRoaXMucGFzc3dvcmRUeXBlID09PSAncGFzc3dvcmQnKSB7CiAgICAgICAgdGhpcy5wYXNzd29yZFR5cGUgPSAnJwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMucGFzc3dvcmRUeXBlID0gJ3Bhc3N3b3JkJwogICAgICB9CiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICB0aGlzLiRyZWZzLnBhc3N3b3JkLmZvY3VzKCkKICAgICAgfSkKICAgIH0sCiAgICBnZXRPdGhlclF1ZXJ5KHF1ZXJ5KSB7CiAgICAgIHJldHVybiBPYmplY3Qua2V5cyhxdWVyeSkucmVkdWNlKChhY2MsIGN1cikgPT4gewogICAgICAgIGlmIChjdXIgIT09ICdyZWRpcmVjdCcpIHsKICAgICAgICAgIGFjY1tjdXJdID0gcXVlcnlbY3VyXQogICAgICAgIH0KICAgICAgICByZXR1cm4gYWNjCiAgICAgIH0sIHt9KQogICAgfSwKCiAgICAvLyBhZnRlclFSU2NhbigpIHsKICAgIC8vICAgaWYgKGUua2V5ID09PSAneC1hZG1pbi1vYXV0aC1jb2RlJykgewogICAgLy8gICAgIGNvbnN0IGNvZGUgPSBnZXRRdWVyeU9iamVjdChlLm5ld1ZhbHVlKQogICAgLy8gICAgIGNvbnN0IGNvZGVNYXAgPSB7CiAgICAvLyAgICAgICB3ZWNoYXQ6ICdjb2RlJywKICAgIC8vICAgICAgIHRlbmNlbnQ6ICdjb2RlJwogICAgLy8gICAgIH0KICAgIC8vICAgICBjb25zdCB0eXBlID0gY29kZU1hcFt0aGlzLmF1dGhfdHlwZV0KICAgIC8vICAgICBjb25zdCBjb2RlTmFtZSA9IGNvZGVbdHlwZV0KICAgIC8vICAgICBpZiAoY29kZU5hbWUpIHsKICAgIC8vICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdMb2dpbkJ5VGhpcmRwYXJ0eScsIGNvZGVOYW1lKS50aGVuKCgpID0+IHsKICAgIC8vICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBwYXRoOiB0aGlzLnJlZGlyZWN0IHx8ICcvJyB9KQogICAgLy8gICAgICAgfSkKICAgIC8vICAgICB9IGVsc2UgewogICAgLy8gICAgICAgYWxlcnQoJ+esrOS4ieaWueeZu+W9leWksei0pScpCiAgICAvLyAgICAgfQogICAgLy8gICB9CiAgICAvLyB9CiAgfQp9Cg=="},{"version":3,"sources":["forget_newpassword.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"forget_newpassword.vue","sourceRoot":"src/views/forgetpassword","sourcesContent":["<template>\n  <div class=\"login-container\">\n    <el-form ref=\"loginForm\" :model=\"loginForm\" :rules=\"loginRules\" class=\"login-form\" autocomplete=\"on\" label-position=\"left\">\n\n      <div class=\"title-container\">\n        <h3 class=\"title\">密码找回</h3>\n      </div>\n\n\n      <el-form-item prop=\"username\">\n        <span class=\"svg-container\">\n          <svg-icon icon-class=\"user\" />\n        </span>\n        <el-input\n          ref=\"username\"\n          v-model=\"loginForm.passwordNew\"\n          placeholder=\"新密码\"\n          name=\"new_password\"\n          type=\"text\"\n          tabindex=\"1\"\n          autocomplete=\"on\"\n        />\n      </el-form-item>\n      <el-button :loading=\"loading\" type=\"primary\" style=\"width:100%;margin-bottom:30px;\" @click.native.prevent=\"handlesubmit\">提交</el-button>\n\n      <div style=\"position:relative\">\n        <div class=\"tips\">\n\n        </div>\n        <div class=\"tips\">\n\n        </div>\n      </div>\n    </el-form>\n\n    <el-dialog title=\"Or connect with\" :visible.sync=\"showDialog\">\n      Can not be simulated on local, so please combine you own business simulation! ! !\n      <br>\n      <br>\n      <br>\n      <social-sign />\n    </el-dialog>\n  </div>\n</template>\n\n<script>\n  import { validUsername } from '@/utils/validate'\n  import SocialSign from './components/SocialSignin'\n\n  export default {\n    name: 'forget',\n    components: { SocialSign },\n    data() {\n      return {\n        loginForm: {\n          username: '',\n          passwordNew: '',\n          token:''\n        },\n        form:{\n          answer:''\n        },\n        passwordType: 'password',\n        capsTooltip: false,\n        loading: false,\n        showDialog: false,\n        redirect: undefined,\n        otherQuery: {}\n      }\n    },\n    watch: {\n      $route: {\n        handler: function(route) {\n          const query = route.query\n          if (query) {\n            this.redirect = query.redirect\n            this.otherQuery = this.getOtherQuery(query)\n          }\n        },\n        immediate: true\n      }\n    },\n    created() {\n      // window.addEventListener('storage', this.afterQRScan)\n    },\n    mounted() {\n\n      this.loginForm.username = this.$route.query.username\n      this.loginForm.token = this.$route.query.token\n      alert(this.loginForm.username )\n      alert(this.loginForm.token )\n\n    },\n    destroyed() {\n      // window.removeEventListener('storage', this.afterQRScan)\n    },\n    methods: {\n      handlesubmit()\n      {\n        let param = new URLSearchParams()\n\n        param.append(\"username\", this.loginForm.username)\n        param.append(\"forgetToken\", this.loginForm.token)\n        param.append(\"passwordNew\", this.loginForm.password)\n\n          this.$axios.post('http://275w5p6964.wicp.vip/user/forget_reset_password.do',param)\n            .then((res) => {\n              this.$router.push({ path:'/login',})\n            })\n            .catch((err) => {\n              alert(\"获取数据失败\")\n              console.log(err)\n            })\n\n      },\n      checkCapslock(e) {\n        const { key } = e\n        this.capsTooltip = key && key.length === 1 && (key >= 'A' && key <= 'Z')\n      },\n      showPwd() {\n        if (this.passwordType === 'password') {\n          this.passwordType = ''\n        } else {\n          this.passwordType = 'password'\n        }\n        this.$nextTick(() => {\n          this.$refs.password.focus()\n        })\n      },\n      getOtherQuery(query) {\n        return Object.keys(query).reduce((acc, cur) => {\n          if (cur !== 'redirect') {\n            acc[cur] = query[cur]\n          }\n          return acc\n        }, {})\n      },\n\n      // afterQRScan() {\n      //   if (e.key === 'x-admin-oauth-code') {\n      //     const code = getQueryObject(e.newValue)\n      //     const codeMap = {\n      //       wechat: 'code',\n      //       tencent: 'code'\n      //     }\n      //     const type = codeMap[this.auth_type]\n      //     const codeName = code[type]\n      //     if (codeName) {\n      //       this.$store.dispatch('LoginByThirdparty', codeName).then(() => {\n      //         this.$router.push({ path: this.redirect || '/' })\n      //       })\n      //     } else {\n      //       alert('第三方登录失败')\n      //     }\n      //   }\n      // }\n    }\n  }\n</script>\n\n<style lang=\"scss\" scoped>\n  $bg:#2d3a4b;\n  $dark_gray:#889aa4;\n  $light_gray:#eee;\n\n  .login-container {\n    min-height: 100%;\n    width: 100%;\n    background-color: $bg;\n    overflow: hidden;\n\n    .login-form {\n      position: relative;\n      width: 520px;\n      max-width: 100%;\n      padding: 160px 35px 0;\n      margin: 0 auto;\n      overflow: hidden;\n    }\n\n    .tips {\n      font-size: 14px;\n      color: #fff;\n      margin-bottom: 10px;\n\n      span {\n        &:first-of-type {\n          margin-right: 16px;\n        }\n      }\n    }\n\n    .svg-container {\n      padding: 6px 5px 6px 15px;\n      color: $dark_gray;\n      vertical-align: middle;\n      width: 30px;\n      display: inline-block;\n    }\n\n    .title-container {\n      position: relative;\n\n      .title {\n        font-size: 26px;\n        color: $light_gray;\n        margin: 0px auto 40px auto;\n        text-align: center;\n        font-weight: bold;\n      }\n    }\n\n    .show-pwd {\n      position: absolute;\n      right: 10px;\n      top: 7px;\n      font-size: 16px;\n      color: $dark_gray;\n      cursor: pointer;\n      user-select: none;\n    }\n\n    .thirdparty-button {\n      position: absolute;\n      right: 0;\n      bottom: 6px;\n    }\n\n    @media only screen and (max-width: 470px) {\n      .thirdparty-button {\n        display: none;\n      }\n    }\n  }\n</style>\n"]}]}