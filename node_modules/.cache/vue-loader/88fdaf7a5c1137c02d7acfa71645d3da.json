{"remainingRequest":"/Users/hchen/Desktop/vue-element-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hchen/Desktop/vue-element-admin/src/views/forgetpassword/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hchen/Desktop/vue-element-admin/src/views/forgetpassword/index.vue","mtime":1594108959193},{"path":"/Users/hchen/Desktop/vue-element-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hchen/Desktop/vue-element-admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hchen/Desktop/vue-element-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hchen/Desktop/vue-element-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHZhbGlkVXNlcm5hbWUgfSBmcm9tICdAL3V0aWxzL3ZhbGlkYXRlJwppbXBvcnQgU29jaWFsU2lnbiBmcm9tICcuL2NvbXBvbmVudHMvU29jaWFsU2lnbmluJwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdmb3JnZXQnLAogIGNvbXBvbmVudHM6IHsgU29jaWFsU2lnbiB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsb2dpbkZvcm06IHsKICAgICAgICB1c2VybmFtZTogJycsCiAgICAgICAgcGFzc3dvcmQ6ICcnLAogICAgICAgIHF1ZXN0aW9uOicnLAogICAgICAgIGFuc3dlcjonJywKICAgICAgfSwKICAgICAgZm9ybTp7CiAgICAgICAgYW5zd2VyOicnCiAgICAgIH0sCiAgICAgIHBhc3N3b3JkVHlwZTogJ3Bhc3N3b3JkJywKICAgICAgY2Fwc1Rvb2x0aXA6IGZhbHNlLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgc2hvd0RpYWxvZzogZmFsc2UsCiAgICAgIHJlZGlyZWN0OiB1bmRlZmluZWQsCiAgICAgIG90aGVyUXVlcnk6IHt9CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgJHJvdXRlOiB7CiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uKHJvdXRlKSB7CiAgICAgICAgY29uc3QgcXVlcnkgPSByb3V0ZS5xdWVyeQogICAgICAgIGlmIChxdWVyeSkgewogICAgICAgICAgdGhpcy5yZWRpcmVjdCA9IHF1ZXJ5LnJlZGlyZWN0CiAgICAgICAgICB0aGlzLm90aGVyUXVlcnkgPSB0aGlzLmdldE90aGVyUXVlcnkocXVlcnkpCiAgICAgICAgfQogICAgICB9LAogICAgICBpbW1lZGlhdGU6IHRydWUKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICAvLyB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc3RvcmFnZScsIHRoaXMuYWZ0ZXJRUlNjYW4pCiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5sb2dpbkZvcm0udXNlcm5hbWUgPSB0aGlzLiRyb3V0ZS5xdWVyeS51c2VybmFtZQogICAgdGhpcy4kYXhpb3MucG9zdCgnL3VzZXIvZ2V0X3VzZXJfaW5mby5kbycse3VzZXJuYW1lOnRoaXMubG9naW5Gb3JtLnVzZXJuYW1lfSkKICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgIGxldCB0aGF0ID0gdGhpcwogICAgICAgIGNvbnNvbGUubG9nKCJzdXNzZXNzIikKICAgICAgICBsZXQgZGF0YWxpc3QgPSByZXMuZGF0YQogICAgICAgIGlmIChkYXRhbGlzdC5zdGF0dXMgPT0gMSkgewogICAgICAgICAgYWxlcnQoIumUmeivr+eggTEiKQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBsZXQgbGVuID0gZGF0YWxpc3QuZGF0YS5sZW5ndGgKICAgICAgICAgIGNvbnNvbGUubG9nKGxlbikKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICAgICAgdGhhdC5sb2dpbkZvcm0ucXVlc3Rpb249ZGF0YWxpc3QuZGF0YVtpXS5xdWVzdGlvbgogICAgICAgICAgICB0aGF0LmxvZ2luRm9ybS5hbnN3ZXI9ZGF0YWxpc3QuZGF0YVtpXS5hbnN3ZXIKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pCiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7CiAgICAgICAgYWxlcnQoIuiOt+WPluaVsOaNruWksei0pSIpCiAgICAgICAgY29uc29sZS5sb2coZXJyKQogICAgICB9KQogICAgaWYgKHRoaXMubG9naW5Gb3JtLnVzZXJuYW1lID09PSAnJykgewogICAgICB0aGlzLiRyZWZzLnVzZXJuYW1lLmZvY3VzKCkKICAgIH0gZWxzZSBpZiAodGhpcy5sb2dpbkZvcm0ucGFzc3dvcmQgPT09ICcnKSB7CiAgICAgIHRoaXMuJHJlZnMucGFzc3dvcmQuZm9jdXMoKQogICAgfQoKICB9LAogIGRlc3Ryb3llZCgpIHsKICAgIC8vIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdzdG9yYWdlJywgdGhpcy5hZnRlclFSU2NhbikKICB9LAogIG1ldGhvZHM6IHsKICAgIGZpbmRfcGFzc3dvcmQoKQogICAgewogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnJywgdGhpcy5sb2dpbkZvcm0pCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgcGF0aDonL2ZvcmdldF9wYXNzd29yZCcsIHF1ZXJ5OiAge3VzZXJuYW1lOnRoaXMubG9naW5Gb3JtLnVzZXJuYW1lfSB9KQogICAgfSwKICAgIGZpbmRfYXNrKCl7CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCcnLCB0aGlzLmxvZ2luRm9ybSkKICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBwYXRoOicvZm9yZ2V0X3Bhc3N3b3JkX2FzaycsIHF1ZXJ5OiAge3VzZXJuYW1lOnRoaXMubG9naW5Gb3JtLnVzZXJuYW1lfSB9KQogICAgfSwKICAgIGNoZWNrQ2Fwc2xvY2soZSkgewogICAgICBjb25zdCB7IGtleSB9ID0gZQogICAgICB0aGlzLmNhcHNUb29sdGlwID0ga2V5ICYmIGtleS5sZW5ndGggPT09IDEgJiYgKGtleSA+PSAnQScgJiYga2V5IDw9ICdaJykKICAgIH0sCiAgICBzaG93UHdkKCkgewogICAgICBpZiAodGhpcy5wYXNzd29yZFR5cGUgPT09ICdwYXNzd29yZCcpIHsKICAgICAgICB0aGlzLnBhc3N3b3JkVHlwZSA9ICcnCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5wYXNzd29yZFR5cGUgPSAncGFzc3dvcmQnCiAgICAgIH0KICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgIHRoaXMuJHJlZnMucGFzc3dvcmQuZm9jdXMoKQogICAgICB9KQogICAgfSwKICAgIGdldE90aGVyUXVlcnkocXVlcnkpIHsKICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHF1ZXJ5KS5yZWR1Y2UoKGFjYywgY3VyKSA9PiB7CiAgICAgICAgaWYgKGN1ciAhPT0gJ3JlZGlyZWN0JykgewogICAgICAgICAgYWNjW2N1cl0gPSBxdWVyeVtjdXJdCiAgICAgICAgfQogICAgICAgIHJldHVybiBhY2MKICAgICAgfSwge30pCiAgICB9LAoKICAgIC8vIGFmdGVyUVJTY2FuKCkgewogICAgLy8gICBpZiAoZS5rZXkgPT09ICd4LWFkbWluLW9hdXRoLWNvZGUnKSB7CiAgICAvLyAgICAgY29uc3QgY29kZSA9IGdldFF1ZXJ5T2JqZWN0KGUubmV3VmFsdWUpCiAgICAvLyAgICAgY29uc3QgY29kZU1hcCA9IHsKICAgIC8vICAgICAgIHdlY2hhdDogJ2NvZGUnLAogICAgLy8gICAgICAgdGVuY2VudDogJ2NvZGUnCiAgICAvLyAgICAgfQogICAgLy8gICAgIGNvbnN0IHR5cGUgPSBjb2RlTWFwW3RoaXMuYXV0aF90eXBlXQogICAgLy8gICAgIGNvbnN0IGNvZGVOYW1lID0gY29kZVt0eXBlXQogICAgLy8gICAgIGlmIChjb2RlTmFtZSkgewogICAgLy8gICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ0xvZ2luQnlUaGlyZHBhcnR5JywgY29kZU5hbWUpLnRoZW4oKCkgPT4gewogICAgLy8gICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IHBhdGg6IHRoaXMucmVkaXJlY3QgfHwgJy8nIH0pCiAgICAvLyAgICAgICB9KQogICAgLy8gICAgIH0gZWxzZSB7CiAgICAvLyAgICAgICBhbGVydCgn56ys5LiJ5pa555m75b2V5aSx6LSlJykKICAgIC8vICAgICB9CiAgICAvLyAgIH0KICAgIC8vIH0KICB9Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/forgetpassword","sourcesContent":["<template>\n<div class=\"login-container\">\n  <el-form ref=\"loginForm\" :model=\"loginForm\" :rules=\"loginRules\" class=\"login-form\" autocomplete=\"on\" label-position=\"left\">\n\n    <div class=\"title-container\">\n      <h3 class=\"title\">找回方式</h3>\n    </div>\n\n    <el-button :loading=\"loading\" type=\"primary\" style=\"width:100%;margin-bottom:30px;\" @click.native.prevent=\"find_password\">原密码找回</el-button>\n    <el-button :loading=\"loading\" type=\"primary\" style=\"width:100%;margin-bottom:30px;\" @click.native.prevent=\"find_ask\">按问题找回</el-button>\n    <div style=\"position:relative\">\n      <div class=\"tips\">\n      </div>\n      <div class=\"tips\">\n      </div>\n    </div>\n  </el-form>\n\n  <el-dialog title=\"Or connect with\" :visible.sync=\"showDialog\">\n    Can not be simulated on local, so please combine you own business simulation! ! !\n    <br>\n    <br>\n    <br>\n    <social-sign />\n  </el-dialog>\n</div>\n</template>\n\n<script>\n  import { validUsername } from '@/utils/validate'\n  import SocialSign from './components/SocialSignin'\n\n  export default {\n    name: 'forget',\n    components: { SocialSign },\n    data() {\n      return {\n        loginForm: {\n          username: '',\n          password: '',\n          question:'',\n          answer:'',\n        },\n        form:{\n          answer:''\n        },\n        passwordType: 'password',\n        capsTooltip: false,\n        loading: false,\n        showDialog: false,\n        redirect: undefined,\n        otherQuery: {}\n      }\n    },\n    watch: {\n      $route: {\n        handler: function(route) {\n          const query = route.query\n          if (query) {\n            this.redirect = query.redirect\n            this.otherQuery = this.getOtherQuery(query)\n          }\n        },\n        immediate: true\n      }\n    },\n    created() {\n      // window.addEventListener('storage', this.afterQRScan)\n    },\n    mounted() {\n      this.loginForm.username = this.$route.query.username\n      this.$axios.post('/user/get_user_info.do',{username:this.loginForm.username})\n        .then((res) => {\n          let that = this\n          console.log(\"sussess\")\n          let datalist = res.data\n          if (datalist.status == 1) {\n            alert(\"错误码1\")\n          } else {\n            let len = datalist.data.length\n            console.log(len)\n            for (let i = 0; i < len; i++) {\n              that.loginForm.question=datalist.data[i].question\n              that.loginForm.answer=datalist.data[i].answer\n            }\n          }\n        })\n        .catch((err) => {\n          alert(\"获取数据失败\")\n          console.log(err)\n        })\n      if (this.loginForm.username === '') {\n        this.$refs.username.focus()\n      } else if (this.loginForm.password === '') {\n        this.$refs.password.focus()\n      }\n\n    },\n    destroyed() {\n      // window.removeEventListener('storage', this.afterQRScan)\n    },\n    methods: {\n      find_password()\n      {\n        this.$store.dispatch('', this.loginForm)\n        this.$router.push({ path:'/forget_password', query:  {username:this.loginForm.username} })\n      },\n      find_ask(){\n        this.$store.dispatch('', this.loginForm)\n        this.$router.push({ path:'/forget_password_ask', query:  {username:this.loginForm.username} })\n      },\n      checkCapslock(e) {\n        const { key } = e\n        this.capsTooltip = key && key.length === 1 && (key >= 'A' && key <= 'Z')\n      },\n      showPwd() {\n        if (this.passwordType === 'password') {\n          this.passwordType = ''\n        } else {\n          this.passwordType = 'password'\n        }\n        this.$nextTick(() => {\n          this.$refs.password.focus()\n        })\n      },\n      getOtherQuery(query) {\n        return Object.keys(query).reduce((acc, cur) => {\n          if (cur !== 'redirect') {\n            acc[cur] = query[cur]\n          }\n          return acc\n        }, {})\n      },\n\n      // afterQRScan() {\n      //   if (e.key === 'x-admin-oauth-code') {\n      //     const code = getQueryObject(e.newValue)\n      //     const codeMap = {\n      //       wechat: 'code',\n      //       tencent: 'code'\n      //     }\n      //     const type = codeMap[this.auth_type]\n      //     const codeName = code[type]\n      //     if (codeName) {\n      //       this.$store.dispatch('LoginByThirdparty', codeName).then(() => {\n      //         this.$router.push({ path: this.redirect || '/' })\n      //       })\n      //     } else {\n      //       alert('第三方登录失败')\n      //     }\n      //   }\n      // }\n    }\n  }\n</script>\n\n<style lang=\"scss\" scoped>\n  $bg:#2d3a4b;\n  $dark_gray:#889aa4;\n  $light_gray:#eee;\n\n  .login-container {\n    min-height: 100%;\n    width: 100%;\n    background-color: $bg;\n    overflow: hidden;\n\n    .login-form {\n      position: relative;\n      width: 520px;\n      max-width: 100%;\n      padding: 160px 35px 0;\n      margin: 0 auto;\n      overflow: hidden;\n    }\n\n    .tips {\n      font-size: 14px;\n      color: #fff;\n      margin-bottom: 10px;\n\n      span {\n        &:first-of-type {\n          margin-right: 16px;\n        }\n      }\n    }\n\n    .svg-container {\n      padding: 6px 5px 6px 15px;\n      color: $dark_gray;\n      vertical-align: middle;\n      width: 30px;\n      display: inline-block;\n    }\n\n    .title-container {\n      position: relative;\n\n      .title {\n        font-size: 26px;\n        color: $light_gray;\n        margin: 0px auto 40px auto;\n        text-align: center;\n        font-weight: bold;\n      }\n    }\n\n    .show-pwd {\n      position: absolute;\n      right: 10px;\n      top: 7px;\n      font-size: 16px;\n      color: $dark_gray;\n      cursor: pointer;\n      user-select: none;\n    }\n\n    .thirdparty-button {\n      position: absolute;\n      right: 0;\n      bottom: 6px;\n    }\n\n    @media only screen and (max-width: 470px) {\n      .thirdparty-button {\n        display: none;\n      }\n    }\n  }\n</style>\n"]}]}